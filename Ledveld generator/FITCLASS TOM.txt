 ;-----------------------------------------------------------------------
 ; 26/DEC/2008  19:15
 ; 
 ; matrix.asm
 ;
 ; getest op breadboard
 ;
 ; ATTINY2313 @ 4 Mhz int.
 ;
 ; williamdob at hotmail dot com
 ;
 ;-----------------------------------------------------------------------

 .include "tn2313def.inc" 

 .def temp = r16
 .def O    = r17
 .def I    = r18

 .equ Speed= 20
   
 .org 0x0000
	rjmp	Init

 Init:

	ldi		temp,RAMEND
	out		SPL,temp

	clr		O
	ser		I

	out		DDRD,I
	out		PORTD,O

	out		DDRB,I
	out		PORTB,O

	
 .undef O
 .undef I

 .def T1= r17
  .def T2 =r18

 .MACRO Delay

	SER		T1
	LDI		T2,Speed

	Timerlus:

	DEC		T1
	BRNE	Timerlus
	DEC		T2
	BRNE	Timerlus

 .ENDMACRO

 
 Main:

 

 Herbegin:

		ldi	    ZL,LOW (Fitclass*2)
		ldi	    ZH,HIGH(Fitclass*2) 

 Nieuw_Frame:
	;	
		lpm 	temp, Z+
		cpi	    temp,'#'
		breq    Herbegin
		mov	    r1		,temp
		lpm 	r2	    , Z+
		lpm 	r3		, Z+
		lpm 	r4		, Z+
		lpm 	r5		, Z+
		lpm 	r6		, Z+
		lpm		r7		, Z+
		lpm		r8      , Z+

 Herlezen_Frame:

		ldi		r20,0b11111110
		out     PORTB,r20
		mov     temp,r1
		out		PORTD,temp
		Delay

		ldi		r20,0b11111101
		out     PORTB,r20
		mov     temp,r2
		out		PORTD,temp

		Delay

		ldi		r20,0b11111011
		out     PORTB,r20
		mov     temp,r3
		out		PORTD,temp

		Delay

		ldi		r20,0b11110111
		out     PORTB,r20
		mov     temp,r4
		out		PORTD,temp

		Delay

		ldi		r20,0b11101111
		out     PORTB,r20
		mov     temp,r5
		out		PORTD,temp

		Delay

		ldi		r20,0b11011111
		out     PORTB,r20
		mov     temp,r6
		out		PORTD,temp

		Delay

		ldi		r20,0b10111111
		out     PORTB,r20
		mov     temp,r7
		out		PORTD,temp

		Delay

		dec     r8
		tst		r8
		breq    Verder
        rjmp    Herlezen_Frame

 Verder:
        rjmp     Nieuw_Frame  
		 

 Fitclass:

 .db		0,1,9,9,9,127,0,50			     ;F
 .db		127,126,118,118,118,0,127,50	  ;F inv
 .db		0,1,9,9,9,127,0,50			     ;F
 .db		127,126,118,118,118,0,127,50	  ;F inv
 .db		0,1,9,9,9,127,0,50			     ;F
 .db		127,126,118,118,118,0,127,50	  ;F inv
 .db		0,1,9,9,9,127,0,50			     ;F
 .db		127,126,118,118,118,0,127,50	  ;F inv
 .db		0,1,9,9,9,127,0,50			     ;F
 .db		127,126,118,118,118,0,127,50	  ;F inv
 .db		0,1,9,9,9,127,0,10			     ;F
 .db		127,126,118,118,118,0,127,10	  ;F inv
 .db		0,1,9,9,9,127,0,10			     ;F
 .db		127,126,118,118,118,0,127,10	  ;F inv
.db		0,1,9,9,9,127,0,10			     ;F
 .db		127,126,118,118,118,0,127,10	  ;F inv
.db		0,1,9,9,9,127,0,10			     ;F
 .db		127,126,118,118,118,0,127,10	  ;F inv
.db		0,1,9,9,9,127,0,10			     ;F
 .db		127,126,118,118,118,0,127,10	  ;F inv

 
 .db	0,0,0,0,0,0,0,150

;VENTJE

 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 
 
; .db	0,0,0,0,0,0,0,150


;FITCLASS

 ;F		1,9,9,9,127
 .db    0,0,0,0,0,0,0,50
 .db	127,0,0,0,0,0,0,7
 .db	9,127,0,0,0,0,0,7 
 .db	9,9,127,0,0,0,0,7
 .db	9,9,9,127,0,0,0,7
 .db	1,9,9,9,127,0,0,7
 .db	0,1,9,9,9,127,0,7
 .db	0,0,1,9,9,9,127,7

 ;I		65,127,65,
 .db	65,0,0,1,9,9,9,7
 .db	127,65,0,0,1,9,9,7
 .db	65,127,65,0,0,1,9,7
 .db    0,65,127,65,0,0,1,7
 .db    0,0,65,127,65,0,0,7

 ;T		1,1,127,1,1
 .db    1,0,0,65,127,65,0,7
 .db    1,1,0,0,65,127,65,7
 .db    127,1,1,0,0,65,127,7
 .db    1,127,1,1,0,0,65,7
 .db    1,1,127,1,1,0,0,7
 .db    0,1,1,127,1,1,0,7
 .db    0,0,1,1,127,1,1,7

 ;C		34,65,65,65,62	
 .db    62,0,0,1,1,127,1,7
 .db    65,62,0,0,1,1,127,7
 .db    65,65,62,0,0,1,1,7
 .db    65,65,65,62,0,0,1,7
 .db    34,65,65,65,62,0,0,7
 .db    0,34,65,65,65,62,0,7
 .db    0,0,34,65,65,65,62,7


 ;L		64,64,64,64,127
 .db    127,0,0,34,65,65,65,7
 .db    64,127,0,0,34,65,65,7
 .db    64,64,127,0,0,34,65,7
 .db    64,64,64,127,0,0,34,7
 .db    64,64,64,64,127,0,0,7
 .db    0,64,64,64,64,127,0,7
 .db    0,0,64,64,64,64,127,7
 
 ;A		124,10,9,10,124
 .db    124,0,0,64,64,64,64,7
 .db    10,124,0,0,64,64,64,7
 .db    9,10,124,0,0,64,64,7 
 .db    10,9,10,124,0,0,64,7 
 .db    124,10,9,10,124,0,0,7 
 .db    0,124,10,9,10,124,0,7
 .db    0,0,124,10,9,10,124,7

 ;S		50,73,73,73,38
 
 .db    38,0,0,124,10,9,10,7
 .db    73,38,0,0,124,10,9,7
 .db    73,73,38,0,0,124,10,7
 .db    73,73,73,38,0,0,124,7
 .db    50,73,73,73,38,0,0,7
 .db    0,50,73,73,73,38,0,7
 .db    0,0,50,73,73,73,38,7

 .db    38,0,0,50,73,73,73,7
 .db    73,38,0,0,50,73,73,7
 .db    73,73,38,0,0,50,73,7
 .db    73,73,73,38,0,0,50,7
 .db    50,73,73,73,38,0,0,7
 .db    0,50,73,73,73,38,0,7
 .db    0,0,50,73,73,73,38,7
 .db    0,0,0,50,73,73,73,7
 .db    0,0,0,0,50,73,73,7
 .db    0,0,0,0,0,50,73,7
 .db    0,0,0,0,0,0,50,7
 .db    0,0,0,0,0,0,0,7

 .db		0,0,0,0,0,0,0,20
	
	;SPIRAAL

 .db 0,0,0,24,0,0,0,10    
 .db 0,0,16,24,0,0,0,10 
 .db 0,0,28,24,0,0,0,10 
 .db 0,0,28,28,4,0,0,10 
 .db 0,0,28,28,60,0,0,10 
 .db 0,32,60,60,60,0,0,10 
 .db 0,62,60,60,60,0,0,10 
 .db 0,62,62,62,62,2,0,10 
 .db 0,62,62,62,62,126,0,10
 .db 64,126,126,126,126,126,0,10
 .db 127,126,126,126,126,126,0,10 
 .db 127,127,127,127,127,127,1,10 
 .db 127,127,127,127,127,127,127,100 
 .db 127,127,127,127,127,127,1,10 
 .db 127,126,126,126,126,126,0,10 
 .db 64,126,126,126,126,126,0,10
 .db 0,62,62,62,62,126,0,10
 .db 0,62,62,62,62,2,0,10 
 .db 0,62,60,60,60,0,0,10 
 .db 0,32,60,60,60,0,0,10 
 .db 0,0,28,28,60,0,0,10 
 .db 0,0,28,28,4,0,0,10
 .db 0,0,28,24,0,0,0,10 
 .db 0,0,16,24,0,0,0,10 
 .db 0,0,0,24,0,0,0,10 
 .db 0,0,0,0,0,0,0,150

 .db		0,0,0,0,0,0,0,10

	.db		0,62,65,65,65,62,0,40	;O
	.db		0,0,0,0,0,0,0,10
	.db		0,127,2,4,2,127,0,40	;M
	.db		0,0,0,0,0,0,0,10
	.db		0,62,65,65,127,0,0,40	;D
	.db		0,0,0,0,0,0,0,10
	.db		0,124,10,9,10,124,0,40	;A
	.db		0,0,0,0,0,0,0,10
	.db		0,1,1,127,1,1,0,40		;T
	
    .db		0,0,0,0,0,0,0,80

			;VENTJE

 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 .db	64,32,23,125,23,32,64,30
 .db	8,8,15,125,15,8,8,30
 
 
			
;	.db		0,54,73,73,73,127,0,40	;B
;	.db		0,0,0,0,0,0,0,10
;	.db		0,0,65,73,73,127,0,40	;E
;	.db		0,0,0,0,0,0,0,10
;	.db		0,127,32,16,32,127,0,40	;W
;	.db		0,0,0,0,0,0,0,10
;	.db		0,0,65,73,73,127,0,40	;E
;	.db		0,0,0,0,0,0,0,10	
;	.db		0,58,73,73,65,62,0,40	;G
;	.db		0,0,0,0,0,0,0,10
;	.db		0,0,65,73,73,127,0,40	;E
;	.db		0,0,0,0,0,0,0,10
;	.db		0,127,8,4,2,127,0,40	;N

	.db		0,0,0,0,0,0,0,80

	.db		0,58,73,73,65,62,0,40	;G
	.db		0,0,0,0,0,0,0,10
	.db		0,0,65,73,73,127,0,40	;E
	.db		0,0,0,0,0,0,0,10
	.db		0,99,69,73,81,99,0,40	;Z
	.db		0,0,0,0,0,0,0,10
	.db		0,62,65,65,65,62,0,40	;O
	.db		0,0,0,0,0,0,0,10
	.db		0,127,8,4,2,127,0,40	;N
	.db		0,0,0,0,0,0,0,10
	.db		0,62,65,65,127,0,0,40	;D
	.db		0,0,0,0,0,0,0,80

	.db		0,0,65,127,65,0,0,40 	;I
	.db		0,0,0,0,0,0,0,10
	.db		0,50,73,73,73,38,0,40	;S

	.db		0,0,0,0,0,0,0,100

	 
	.db		0,1,9,9,9,127,0,40		;F
	.db		0,0,0,0,0,0,0,10	
	.db		0,0,65,127,65,0,0,40	;I
	.db		0,0,0,0,0,0,0,10
	.db		0,1,1,127,1,1,0,40		;T
	.db		0,0,0,0,0,0,0,10
	.db     0,34,65,65,65,62,0,40	;C
	.db		0,0,0,0,0,0,0,10 
	.db		0,64,64,64,64,127,0,40	;L
	.db		0,0,0,0,0,0,0,10
	.db		0,124,10,9,10,124,0,40	;A
	.db		0,0,0,0,0,0,0,10		
	.db		0,50,73,73,73,38,0,40	;S
	.db		0,0,0,0,0,0,0,10
	.db		0,50,73,73,73,38,0,40	;S

	.db		0,0,0,0,0,0,0,100


		;DRAAI-STER


	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,5
	.db		8,8,8,127,8,8,8,5
	.db		65,34,20,8,20,34,65,5
	.db		8,8,8,127,8,8,8,5
	.db		65,34,20,8,20,34,65,5
	.db		8,8,8,127,8,8,8,5
	.db		65,34,20,8,20,34,65,5
	.db		8,8,8,127,8,8,8,5
	.db		65,34,20,8,20,34,65,5
	.db		8,8,8,127,8,8,8,5
	.db		65,34,20,8,20,34,65,5
	.db		8,8,8,127,8,8,8,5
	.db		65,34,20,8,20,34,65,5
	.db		8,8,8,127,8,8,8,5
	.db		65,34,20,8,20,34,65,5

	.db		0,0,0,0,0,0,0,200

	



 


 
   		
 .db '#'

 .exit


		__________________________________________________________________________

					Electronics 4 Fun - http://users.telenet.be/williamdob
		__________________________________________________________________________

 ;SPIRAAL

 .db 0,0,0,24,0,0,0,10    
 .db 0,0,16,24,0,0,0,10 
 .db 0,0,28,24,0,0,0,10 
 .db 0,0,28,28,4,0,0,10 
 .db 0,0,28,28,60,0,0,10 
 .db 0,32,60,60,60,0,0,10 
 .db 0,62,60,60,60,0,0,10 
 .db 0,62,62,62,62,2,0,10 
 .db 0,62,62,62,62,126,0,10
 .db 64,126,126,126,126,126,0,10
 .db 127,126,126,126,126,126,0,10 
 .db 127,127,127,127,127,127,1,10 
 .db 127,127,127,127,127,127,127,100 
 .db 127,127,127,127,127,127,1,10 
 .db 127,126,126,126,126,126,0,10 
 .db 64,126,126,126,126,126,0,10
 .db 0,62,62,62,62,126,0,10
 .db 0,62,62,62,62,2,0,10 
 .db 0,62,60,60,60,0,0,10 
 .db 0,32,60,60,60,0,0,10 
 .db 0,0,28,28,60,0,0,10 
 .db 0,0,28,28,4,0,0,10
 .db 0,0,28,24,0,0,0,10 
 .db 0,0,16,24,0,0,0,10 
 .db 0,0,0,24,0,0,0,10 
 .db 0,0,0,0,0,0,0,150


 	;DRAAI-STER


	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10
	.db		8,8,8,127,8,8,8,10
	.db		65,34,20,8,20,34,65,10

	.db		0,0,0,0,0,0,0,250


